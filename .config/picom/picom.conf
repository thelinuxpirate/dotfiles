#################################
#       Shadow Settings         #
#################################
shadow = false;
shadow-radius = 10;
shadow-offset-x = -10;
shadow-offset-y = -10;
shadow-color = "#000000";

#################################
#           Fading              #
#################################
fading = true;
fade-in-step = 0.03;
fade-out-step = 0.03;
fade-delta = 5;
no-fading-openclose = false;
no-fading-destroyed-argb = false;

#################################
#         Transparency          #
#################################
frame-opacity = 0.7;

#################################
#        Background Blur        #
#################################
blur: {
  method = "dual_kawase";
  strength = 2.958;
};
blur-background = true;
blur-background-frame = true;

#################################
#       General Settings        #
#################################
backend = "glx";
vsync = true;
detect-client-opacity = true;
detect-transient = true;
detect-client-leader = true;
no-use-damage = true;

#################################
#             Rules             #
#################################
rules = (
  # Disable all effects for slop
  {
    match = "class_g = 'slop'";
    fade = false;
    shadow = false;
    blur-background = false;
    focus = false;
  },

  # Disable shadow for menus and tooltips
  {
    match = "window_type = 'popup_menu' || window_type = 'dropdown_menu' || window_type = 'menu' || window_type = 'tooltip'";
    shadow = false;
    corner-radius = 0;
  },

  # Disable blur for some system hints
  {
    match = "_GTK_FRAME_EXTENTS";
    blur-background = false;
  },

  # Opacity settings
  {
    match = "class_g = 'Emacs' && focused";
    opacity = 0.932;
  },
  {
    match = "class_g = 'Emacs' && !focused";
    opacity = 0.95;
  },
  {
    match = "class_g = 'neovide' && focused";
    opacity = 0.932;
  },
  {
    match = "class_g = 'neovide' && !focused";
    opacity = 0.95;
  },
  {
    match = "class_g = 'org.wezfurlong.wezterm' && focused";
    opacity = 0.932;
  },
  {
    match = "class_g = 'org.wezfurlong.wezterm' && !focused";
    opacity = 0.95;
  },
  {
    match = "class_g = 'Alacritty' && focused";
    opacity = 0.932;
  },
  {
    match = "class_g = 'Alacritty' && !focused";
    opacity = 0.932;
  },
  {
    match = "class_g = 'Spotify' && focused";
    opacity = 0.94;
  },
  {
    match = "class_g = 'Spotify' && !focused";
    opacity = 0.92;
  },
  {
    match = "class_g = 'pavucontrol' && focused";
    opacity = 0.92;
  },
  {
    match = "class_g = 'pavucontrol' && !focused";
    opacity = 0.95;
  },
  {
    match = "class_g = 'Nemo'";
    opacity = 0.97;
  },

  # Explicit opacity for dropdowns
  {
    match = "window_type = 'dropdown_menu'";
    opacity = 0.8;
  },
  {
    match = "window_type = 'popup_menu'";
    opacity = 0.8;
  },

  # Focus exclusions
  {
    match = "class_g = 'Cairo-clock' || class_g = 'Bar'";
    focus = false;
  },

  # Tooltip appearance
  {
    match = "window_type = 'tooltip'";
    corner-radius = 0;
    opacity = 0.90;
  },

  # Fullscreen: disable rounded corners
  {
    match = "fullscreen";
    opacity = 1;
    corner-radius = 0;
  },

  # Dock settings
  {
    match = "window_type = 'dock'";
    corner-radius = 0;
    fade = true;
  },

  # Menus/popups: disable rounded corners
  {
    match = "window_type = 'dropdown_menu' || window_type = 'menu' || window_type = 'popup' || window_type = 'popup_menu'";
    corner-radius = 0;
  },
);

